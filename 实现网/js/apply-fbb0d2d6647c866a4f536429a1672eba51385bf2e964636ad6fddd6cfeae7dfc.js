function detect_and_set_selected_tags(){var e=$(".tag-list ol.selected-tags li");0<e.length&&(apply_skill_tags=[],e.each(function(){var e=$(this).find("span").text();apply_skill_tags.push(e)}),$.unique(apply_skill_tags),set_programmer_skill(),set_selected())}function set_selected(){var e=$(".tag-list ol.for-select li");0<e.length&&e.each(function(){x=$(this).text().trim(),-1==apply_skill_tags.indexOf(x)||$(this).addClass("selected")})}function set_programmer_skill(){var e=$("#programmer_skill");0<e.length&&e.val(apply_skill_tags.join(","))}function double_up(){$(this).html("\u6536\u8d77\u8303\u4f8b&nbsp;<i class='fa fa-angle-double-up'></i>"),$(this).one("click",double_down)}function double_down(){$(this).html("\u5c55\u5f00\u8303\u4f8b&nbsp;<i class='fa fa-angle-double-down'></i>"),$(this).one("click",double_up)}var apply={init:function(){this.getDom(),this.addEvent(),this.removeEvent(),this.initRender()},uiEvent:function(e){e.find(".now_button").addClass("hidden"),e.find(".times_button").addClass("hidden"),e.next(".company-title").removeClass("hidden")},uiRemoveRelateEvent:function(e){x=e.prev(".company-title"),x.find(".now_button").removeClass("hidden"),x.find(".times_button").removeClass("hidden")},uiRemoveEvent:function(e){var t=this,a=$(e).find("input");$.each(a,function(e,t){$(t).val("")}),$(e).addClass("hidden"),t.uiRemoveRelateEvent(e)},validate:function(e){var t=e.find(".now_company"),a=e.find(".now_title");return!(!t.val()||!a.val())},addEvent:function(){var t=this;$(document).on("click",".now_button",function(){var e=$(this).parents(".company-title");t.validate(e)&&t.uiEvent(e)})},removeEvent:function(){var t=this;$(document).on("click",".times_button",function(){var e=$(this).parents(".company-title");t.uiRemoveEvent(e)})},getDom:function(){this.programmer_company=$("#programmer_company"),this.programmer_title=$("#programmer_title"),this.addButton=$(".now_button")},initRender:function(){var i=this,e=$(".company-title");$.each(e,function(e,t){var a=i.validate($(t)),n=$(t);if(!a)return i.uiRemoveRelateEvent(n),!1;n.removeClass("hidden"),2!=e&&(n.find(".now_button").addClass("hidden"),n.find(".times_button").addClass("hidden"))})}},max_tags_count=5;apply.init(),$(function(){$(document).on("change","#programmer_how_money",function(){var e=$(this).val();$("#programmer_how_money_hint").text(25*e)}),$(document).on("change","#programmer_region",function(){$(this).val();$("#programmer_address").val(""),$("#programmer_address").attr("required",!0)}),$(document).on("change","#programmer_city",function(){var e="/programmers/get_its_regions/"+$(this).val();$.ajax({url:e,dataType:"text"}).done(function(e){$("#programmer_region").html(e)}),$("#programmer_address").val("")})}),soho_smart_checked();var apply_skill_tags=[];$(document).ready(function(){detect_and_set_selected_tags()}),$(document).on("click","#btn-add-skill",function(e){e.preventDefault();var t=$("#programmer_skill_tags").val().trim(),a=$(".tag-list ol.selected-tags li").size();if(!(0<t.length)||max_tags_count<=a)return $.scojs_message("\u6807\u7b7e\u4e2a\u6570\u4e0d\u80fd\u5927\u4e8e5\u4e2a",$.scojs_message.TYPE_ALERT),void $("#programmer_skill_tags").addClass("error");$("#programmer_skill_tags").removeClass("error");var n=$("#special-tag").clone().removeClass("hidden").removeAttr("id");n.find("span").text(t),$(".tag-list ol.selected-tags").append(n),$("#programmer_skill_tags").val(""),apply_skill_tags.push(t),set_programmer_skill()}),$(document).on("click",".remove-skill",function(){var e=$(this).parent(".tag").find("span").text();for($(this).parent(".tag").remove(),apply_skill_tags.indexOf(e);-1!==apply_skill_tags.indexOf(e);)apply_skill_tags.splice(apply_skill_tags.indexOf(e),1);set_programmer_skill()}),$(document).on("click",".tag-list ol.for-select .tag",function(){var e=$(".tag-list ol.selected-tags li").size(),a=$(this).text().trim();if($(this).hasClass("selected"))return $(this).removeClass("selected"),$(".tag-list ol.selected-tags li").each(function(){var e=$(this).find("span"),t=e.text().trim();if(a==t)for(e.parent("li").remove(),apply_skill_tags.indexOf(t);-1!==apply_skill_tags.indexOf(t);)apply_skill_tags.splice(apply_skill_tags.indexOf(t),1)}),void set_programmer_skill();if(max_tags_count<=e)$.scojs_message("\u6807\u7b7e\u4e2a\u6570\u4e0d\u80fd\u5927\u4e8e5\u4e2a",$.scojs_message.TYPE_ALERT);else if($(this).addClass("selected"),max_tags_count<=e)$.scojs_message("\u6807\u7b7e\u4e2a\u6570\u4e0d\u80fd\u5927\u4e8e5\u4e2a",$.scojs_message.TYPE_ALERT);else{var t=$("#special-tag").clone().removeClass("hidden").removeAttr("id");t.find("span").text(a),$(".tag-list ol.selected-tags").append(t),apply_skill_tags.push(a),set_programmer_skill()}}),$(document).ready(function(){var e=$("#programmer_technical_experience");if(0<e.length){var t=e.val(),a=$(".edit_programmer").data("programmer-id")+"/programmer_technical_experience",n=localStorage.getItem(a);t.length<=0&&null!=n&&e.text(n),e.val().length<=0?$("#pte-hint").hide():$("#pte-hint span").text(e.val().length)}var i=$("#programmer_project_experience");if(0<i.length){var r=$(".edit_programmer").data("programmer-id")+"/programmer_project_experience",l=i.val(),s=localStorage.getItem(r);l.length<=0&&null!=s&&i.text(s),i.val().length<=0?$("#ppe-hint").hide():$("#ppe-hint span").text(i.val().length)}}),$(document).on("input propertychange","#programmer_technical_experience",function(){var e=$(".edit_programmer").data("programmer-id")+"/programmer_technical_experience";localStorage.setItem(e,$(this).val());var t=$(this).val().length;t<=0?$("#pte-hint").hide():($("#pte-hint").show(),$("#pte-hint span").text(t))}),$(document).on("input propertychange","#programmer_project_experience",function(){var e=$(".edit_programmer").data("programmer-id")+"/programmer_project_experience";localStorage.setItem(e,$(this).val());var t=$(this).val().length;t<=0?$("#ppe-hint").hide():($("#ppe-hint").show(),$("#ppe-hint span").text(t))}),$(document).on("change","input[name='programmer[working_state]']",function(e){e.preventDefault();var t=$("#appointment_time_group");"working_state_serving"==$("input[name='programmer[working_state]']:checked").val()?t.slideDown("fast"):t.slideUp("fast")}),$(document).on("change","#programmer_territory",function(){var e="#list-for-"+$(this).val();0<$(e).length?$(".tag-list ol.for-select").html($(e).html()).fadeIn():$(".tag-list ol.for-select").html("").fadeIn()}),$("#technical_experience-example-collapse").one("click",double_up),$("#project_experience-example-collapse").one("click",double_up);