var service_appointment={mainServicePrice:0,mainServiceCount:1,mainServiceTotalAmount:0,expandServiceTotalAmount:0,allServiceTotalAmount:0,expandServicesInfoArray:[],urgentServicesInfoArray:[],init:function(){this.getDom(),this.changeMainServiceQuantity(),this.changeSidebarMainServiceQuantity(),this.changeExpandServiceSelect(),this.changeSidebarExpandServiceSelect(),this.changePriceFieldCheckbox(),this.changeSidebarPriceFieldCheckbox(),this.setMainServiceTotalAmount(),this.showMainServiceTotalAmount(),this.setExpandServiceAddPrice(),this.setSidebarExpandServiceAddPrice(),this.setAllServiceTotalAmount(),this.showAllServiceTotalAmount(),this.setAllFormFields(),this.setExpandServiceCheckedListOnlyCss(),this.setSidebarExpandServiceCheckedListOnlyCss()},getDom:function(){this.main_service_quantity=$("#service_quantity"),this.sidebar_service_quantity=$("#sidebar_service_quantity"),this.all_service_main_price=$(".all-service-main-price"),this.main_service_unit_number=$("#service-unit"),this.service_main_price=$("#service-main-price"),this.expand_service_select=$(".expand-service-select"),this.sidebar_expand_service_select=$(".sidebar-expand-service-select"),this.main_price_src=$(".main-price-src"),this.price_field_checkbox=$(".price-field :checkbox"),this.sidebar_price_field_checkbox=$(".sidebar-price-field :checkbox"),this.expand_services_info_ele=$("form.buy-service-form").find(".expand_services_info"),this.urgent_service_info_ele=$("form.buy-service-form").find(".urgent_service_info"),this.service_info_ele=$("form.buy-service-form").find(".service_info")},setMainServiceTotalAmount:function(){var e=this;e.mainServicePrice=e.service_main_price.data("origin-price"),e.mainServiceCount=e.main_service_quantity.val(),e.mainServiceTotalAmount=e.mainServicePrice*e.mainServiceCount},showMainServiceTotalAmount:function(){var e=this;1<e.mainServiceCount?e.main_service_unit_number.text(e.mainServiceCount):e.main_service_unit_number.text(""),e.all_service_main_price.text(e.mainServiceTotalAmount)},setExpandServiceAddPrice:function(){var e=this;e.price_field_checkbox.each(function(){e.setItemExpandServiceTotalAmount($(this))})},setItemExpandServiceTotalAmount:function(e){var i=e.closest(".price-field").find(".add-price"),t=e.closest(".price-field").data("price")*e.closest(".price-field").find(".expand-service-select").val();i.text(t)},setSidebarExpandServiceAddPrice:function(){var e=this;e.sidebar_price_field_checkbox.each(function(){e.setSidebarItemExpandServiceTotalAmount($(this))})},setSidebarItemExpandServiceTotalAmount:function(e){var i=e.closest(".sidebar-price-field").find(".add-price"),t=e.closest(".sidebar-price-field").data("price")*e.closest(".sidebar-price-field").find(".sidebar-expand-service-select").val();i.text(t)},setExpandServiceTotalAmount:function(){var i=this;i.expandServiceTotalAmount=0,$(".input-add-price:checked").each(function(){var e=$(this).closest(".price-field").data("price")*$(this).closest(".price-field").find(".expand-service-select").val();i.expandServiceTotalAmount+=e})},setAllServiceTotalAmount:function(){var e=this;e.setMainServiceTotalAmount(),e.setExpandServiceTotalAmount(),e.allServiceTotalAmount=e.mainServiceTotalAmount+e.expandServiceTotalAmount},showAllServiceTotalAmount:function(){var e=this;e.main_price_src.text(e.allServiceTotalAmount)},changeMainServiceQuantity:function(){var e=this;this.main_service_quantity.unbind().change(function(){e.setMainServiceTotalAmount(),e.showMainServiceTotalAmount(),e.mainServiceCount!=e.sidebar_service_quantity.val()&&e.sidebar_service_quantity.val(e.mainServiceCount).change(),1<$(this).val()?e.main_service_unit_number.text(e.mainServiceCount):e.main_service_unit_number.text(""),e.setAllFormFieldsForMainService(),e.setAllServiceTotalAmount(),e.showAllServiceTotalAmount()})},changeSidebarMainServiceQuantity:function(){var e=this;this.sidebar_service_quantity.unbind().change(function(){e.mainServiceCount!=$(this).val()&&(e.mainServiceCount=$(this).val(),e.main_service_quantity.val(e.mainServiceCount).change())})},changeExpandServiceSelect:function(){var e=this;this.expand_service_select.unbind().change(function(){e.setItemServiceTotalAmountAndColor($(this)),e.syncSidebarExpandServiceCount($(this)),e.syncSidebarExpandServiceColor($(this)),e.syncSidebarItemExpandServiceTotalAmount($(this)),e.setAllFormFieldsForExpandService(),e.setExpandServiceCheckedListOnlyCss(),e.setAllServiceTotalAmount(),e.showAllServiceTotalAmount()})},setItemServiceTotalAmountAndColor:function(e){var i=e.data("price"),t=e.val();e.closest(".item-price-section").find(".add-price").text(i*t);var c=e.closest(".price-field").find(".input-add-price");c.is(":checked")||c.prop("checked",!0)},syncSidebarExpandServiceCount:function(e){var i=e.attr("id");if(/^sidebar_/.test(i))var t="#"+i.replace(/^sidebar_/,"");else t="#sidebar_"+i;$(t).val()!=e.val()&&$(t).val(e.val()).change()},syncSidebarExpandServiceColor:function(e){var i=e.attr("id");if(/^sidebar_/.test(i))var t="#"+i.replace(/^sidebar_/,"");else t="#sidebar_"+i;var c=e.closest(".price-field").find(".input-add-price"),r=$(t).closest(".sidebar-price-field").find(".sidebar-input-add-price");r.prop("checked",c.is(":checked")),r.is(":checked")?$(t).closest(".sidebar-price-field").addClass("checked"):$(t).closest(".sidebar-price-field").removeClass("checked")},syncSidebarItemExpandServiceTotalAmount:function(e){var i=e.attr("id");if(/^sidebar_/.test(i))var t="#"+i.replace(/^sidebar_/,"");else t="#sidebar_"+i;var c=e.closest(".price-field").find(".add-price");$(t).closest(".sidebar-price-field").find(".add-price").text(c.text())},changeSidebarExpandServiceSelect:function(){var e=this;e.sidebar_expand_service_select.unbind().change(function(){e.syncSidebarExpandServiceCount($(this))})},changePriceFieldCheckbox:function(){var e=this;this.price_field_checkbox.unbind().change(function(){e.setAllFormFieldsForExpandService(),e.setExpandServiceCheckedListOnlyCss(),e.syncSidebarExpandServiceCount($(this)),e.syncSidebarExpandServiceColor($(this)),e.syncSidebarItemExpandServiceTotalAmount($(this)),e.setAllServiceTotalAmount(),e.showAllServiceTotalAmount()})},changeSidebarPriceFieldCheckbox:function(){this.sidebar_price_field_checkbox.unbind().change(function(){var e=$(this).attr("id");if(/^sidebar_/.test(e))var i="#"+e.replace(/^sidebar_/,"");else i="#sidebar_"+e;$(i).prop("checked",$(this).is(":checked")).change()})},setAllFormFieldsForMainService:function(){var e=this,i=e.service_main_price.data("id"),t=e.mainServiceCount;e.service_info_ele.val(i+"-"+t)},setAllFormFieldsForExpandService:function(){var e=this;e.expandServicesInfoArray=[],e.urgentServicesInfoArray=[],$(".input-add-price:checked").each(function(){e.setServicesInfoArray($(this))}),e.urgent_service_info_ele.val(e.urgentServicesInfoArray.join(",")),e.expand_services_info_ele.val(e.expandServicesInfoArray.join(","))},setServicesInfoArray:function(e){var i=this,t=e.closest(".price-field"),c=t.data("id"),r=t.data("type"),n=t.find(".expand-service-select").val();"normal"==r?i.expandServicesInfoArray.push(c+"-"+n):"urgent"==r&&i.urgentServicesInfoArray.push(c+"-"+n)},setAllFormFields:function(){var e=this;e.setAllFormFieldsForMainService(),e.setAllFormFieldsForExpandService()},setExpandServiceCheckedListOnlyCss:function(){var e=this;e.price_field_checkbox.each(function(){e.setItemExpandServiceColor($(this))})},setSidebarExpandServiceCheckedListOnlyCss:function(){var e=this;e.sidebar_price_field_checkbox.each(function(){e.setSidebarItemExpandServiceColor($(this))})},setItemExpandServiceColor:function(e){var i=e.closest(".price-field");e.is(":checked")?i.addClass("checked"):i.removeClass("checked")},setSidebarItemExpandServiceColor:function(e){var i=e.closest(".sidebar-price-field");e.is(":checked")?i.addClass("checked"):i.removeClass("checked")}};service_appointment.init();