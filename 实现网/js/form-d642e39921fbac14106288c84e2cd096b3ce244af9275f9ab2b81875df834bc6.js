function tr_element_valid(){var e=$("tr.visible-ele .no-shadow"),r=$("tr.visible-ele .no-shadow:required"),i=!1;return picture_detect.totalItem=e.length,0<r.length?e.each(function(e){var r=$(this);if(r.prop("required")){if(!(0<r.val().length))return picture_detect.invalidItemIndex=e+1,i=!1;i=!0}}):i=!0,i}function previewCover(e,r){var i;e.files&&e.files[0]&&((i=new FileReader).onload=function(e){r.parents(".service-case-cover-box").find(".service-case-cover").attr("src",e.target.result)},i.readAsDataURL(e.files[0]))}$(".form-with-validate").validate({rules:{"service[title]":{required:!0,minlength:2,maxlength:20},"service[category]":"required","service[description]":{required:!0,minlength:140},"service[main_price]":{required:!0,range:[10,2e5],step:10,max:2e5,min:10},"service[employer_provider]":{minlength:20}},messages:{"service[title]":{required:"\u8bf7\u586b\u5199\u670d\u52a1\u540d\u79f0",minlength:"\u670d\u52a1\u540d\u79f0\u5b57\u6570\u592a\u5c11",maxlength:"\u670d\u52a1\u540d\u79f0\u5b57\u6570\u592a\u591a"},"service[category]":"\u8bf7\u9009\u62e9\u670d\u52a1\u6240\u5c5e\u7c7b\u522b","service[description]":{required:"\u8bf7\u586b\u5199\u670d\u52a1\u4ecb\u7ecd\uff0c\u5411\u4e70\u5bb6\u552e\u5356\u4f60\u7684\u6280\u80fd\u548c\u670d\u52a1",minlength:"\u670d\u52a1\u4ecb\u7ecd\u5b57\u6570\u8fc7\u5c11\uff0c\u8bf7\u4e0d\u8981\u5c11\u4e8e140\u5b57"},"service[employer_provider]":{minlength:"\u8bf7\u8bf4\u660e\u60a8\u9700\u8981\u96c7\u4e3b\u63d0\u4f9b\u4ec0\u4e48\u6750\u6599"},"service[main_price]":{required:"\u8bf7\u8bbe\u7f6e\u670d\u52a1\u6807\u51c6\u4ef7",range:"\u4ef7\u683c\u8bf7\u4e0d\u8981\u8fc7\u9ad8\u6216\u592a\u4f4e",step:"\u8bf7\u4f7f\u752810\u7684\u6574\u6570\u500d",max:"\u4ef7\u683c\u8bf7\u4e0d\u8981\u8fc7\u9ad8",min:"\u4ef7\u683c\u8bf7\u4e0d\u8981\u8fc7\u4f4e"}}}),0<$("#service_accept_urgent:checked").length&&$(".urgent-services").slideDown();var picture_detect={invalidItemIndex:!1,totalItem:0};$("form.form-with-validate").on("submit",function(e){var r=$("#should-upload-cover-notice");if(!tr_element_valid()){var i="\u7b2c"+picture_detect.invalidItemIndex+"\u4e2a\u6848\u4f8b\u8bf7\u4e0a\u4f20\u56fe\u7247("+picture_detect.totalItem+")";return r.text(i),r.show(),e.preventDefault(),!1}r.hide()}),$("#service_accept_urgent").change(function(){var e=$(".urgent-services");this.checked?e.slideDown():e.slideUp()}),$(document).on("change",".no-shadow",function(){var e=$(this).val().split(".").pop().toLowerCase(),r=$("#should-upload-cover-notice");if(r.text("\u8bf7\u7528\u5e38\u89c1\u7684\u56fe\u7247\u683c\u5f0f"),-1==$.inArray(e,["gif","png","jpg","jpeg"]))return $(this).siblings("img.service-case-cover").attr("src","/assets/services/add.png"),void r.show();r.hide(),previewCover(this,$(this))}),$(document).on("change","#service_category_slug",function(){var e=$(this).val(),r="#service_"+e;if("others"===e){$("#service_sub_category_slug").addClass("hidden").prop("required",!1).val(""),$("#service_sub_category_cn").removeClass("hidden");var i=$("#service_sub_category_slug-error");0<i.length&&i.remove()}else{var t=$(r).clone().removeClass("hidden").html();$("#service_sub_category_slug").removeClass("hidden").prop("required",!0).html(t),$("#service_sub_category_cn").addClass("hidden").val("")}$(".sub-category-slug-box").hasClass("hidden")&&$(".sub-category-slug-box").removeClass("hidden").slideDown()});